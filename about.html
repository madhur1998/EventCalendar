<!DOCTYPE html>
<html>
  <head>
    <title>Event-Calendar</title>
    <meta charset='utf-8' />
    <link rel="shortcut icon" href="icon.ico" />
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/clean-blog.min.css" rel="stylesheet">
    <link href="event.css" rel="stylesheet" type="text/css">
  </head>
  <body>
        <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <!--<a class="navbar-brand" href="index.html" style="font-size: 35px">Home Page</a> -->
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html" style="font-size: 20px;">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html" style="font-size: 20px;">Create Event</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="post.html" style="font-size: 20px;">Calendar</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html" style="font-size: 20px;">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="authorize-button" style="font-size: 20px;">Sign In</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="signout-button" style="font-size: 20px;">Sign Out</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

   

    <!-- Page Header -->
    <header class="masthead" style="background-image: url('homebg3.jpg')">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="page-heading">
              <h1 class="heading1">CREATE EVENT</h1>
              <span class="subheading"><b style="font-size: 120%">Create your event and add it to the calender</b></span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->

<article class="afterheader" style="background-image: url('')">
  <div class="formdiv" style="background-image: url('about2.jpg')">
    

  
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Sofia' rel='stylesheet' type='text/css'>
<div class='login'>
  <h2>&bull; Event Form &bull;</h2>
  <div class="underline">
  </div>
  <input id="eventname" name='eventname' placeholder='Event Name' type='text'>
  <input id="event-des" name='eventdescription' placeholder='Event Description' type='text'>
  <input id="eventvenue" name='event venue' placeholder='Event Venue' type='text'>
  <input id="startdate" name="eventdate" placeholder="Start Date (yyyy-mm-dd)" type='text'>
  <input id="starttime" name="eventtime" placeholder="Start Time (hh:mm)" type='text'>
  <input id="enddate" name="eventdate" placeholder="End Date (yyyy-mm-dd)" type='text'>
  <input id="endtime" name="eventtime" placeholder="End Time (hh:mm)" type='text'>
  <input id="organiser" name="eventorg" placeholder="Organizer Name" type='text'>
  <input id="organiser-mail" name="eventcontact" placeholder="Organizer E-Mail" type='text'>
  
  <div class="buttondiv" style="padding-top: 30px">
    <input id="submit-button" class='animated' type='submit' value='Create Event' onclick="submit1()">
  </div>
</div>

</div>


    <hr>

    <!-- Footer -->
    <footer class="myfooter" style="padding-top: 850px">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright &copy; Your Website 2017</p>
          </div>
        </div>
      </div>
    </footer>
</article>
    <script type="text/javascript">
      var CLIENT_ID = '670841775630-9tkl6gurlc1p6tqfl2gkbb2saetruig9.apps.googleusercontent.com';

      // Array of API discovery doc URLs for APIs used by the quickstart
      var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];

      // Authorization scopes required by the API; multiple scopes can be
      // included, separated by spaces.
      var SCOPES = "https://www.googleapis.com/auth/calendar";

      var authorizeButton = document.getElementById('authorize-button');
      var signoutButton = document.getElementById('signout-button');
      var submitButton = document.getElementById('submit-button');

      /**
       *  On load, called to load the auth2 library and API client library.
       */
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      /**
       *  Initializes the API client library and sets up sign-in state
       *  listeners.
       */
      function initClient() {
        gapi.client.init({
          discoveryDocs: DISCOVERY_DOCS,
          clientId: CLIENT_ID,
          scope: SCOPES
        }).then(function () {
          // Listen for sign-in state changes.
          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

          // Handle the initial sign-in state.
          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
          authorizeButton.onclick = handleAuthClick;
          signoutButton.onclick = handleSignoutClick;
        });
      }

      /**
       *  Called when the signed in status changes, to update the UI
       *  appropriately. After a sign-in, the API is called.
       */
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          authorizeButton.style.display = 'none';
          signoutButton.style.display = 'block';
          listUpcomingEvents;
        } else {
          authorizeButton.style.display = 'block';
          signoutButton.style.display = 'none';
        }
      }

      function handleAuthClick(event) {
        gapi.auth2.getAuthInstance().signIn();
      }

      function handleSignoutClick(event) {
        gapi.auth2.getAuthInstance().signOut();
      }

      function appendPre(message) {
        window.alert(message);
      }

      function listUpcomingEvents() {
        gapi.client.calendar.events.list({
          'calendarId': 'iiita.ac.in_64drkdvmmo424joieae2faae7g@group.calendar.google.com',
          'timeMin': (new Date()).toISOString(),
          'showDeleted': false,
          'singleEvents': true,
          'maxResults': 10,
          'orderBy': 'startTime'
        }).then(function(response) {
          var events = response.result.items;
          appendPre('Upcoming events:');

          if (events.length > 0) {
            for (i = 0; i < events.length; i++) {
              var event = events[i];
              var when = event.start.dateTime;
              if (!when) {
                when = event.start.date;
              }
              appendPre(event.summary + ' (' + when + ')')
            }
          } else {
            appendPre('No upcoming events found.');
          }
        });
      }
      function submit1(){
          var event = {
            'summary': document.getElementById("eventname").value,
            'location': document.getElementById("eventvenue").value,
            "description" : document.getElementById("event-des").value,
            'end': {
              'dateTime': document.getElementById("enddate").value + 'T' + document.getElementById("endtime").value + ':00+00:00',
             },
            'start': {
              'dateTime': document.getElementById("startdate").value + 'T' + document.getElementById("starttime").value + ':00+00:00',
              },
              'organizer': {
               'displayName': document.getElementById("organiser").value,
                'email': document.getElementById("organiser-mail").value,
              },
          };
      
        var request = gapi.client.calendar.events.insert({
          'calendarId': 'iiita.ac.in_64drkdvmmo424joieae2faae7g@group.calendar.google.com',
          'resource': event
        });

        request.execute(function(event) {
          appendPre('Your event has been created...');   
        });
      }
//       function submit() {
//         var event = {
//   'summary': document.getElementById("eventname").value,
//   'location': document.getElementById("eventvenue").value,
//   'description': document.getElementById("event-des").value,
//   'start': {
//     'dateTime': document.getElementById("startdate").value + 'T' + document.getElementById("starttime") + ':00+00:00',
//   },
//   'end': {
//     'dateTime': document.getElementById("enddate").value + 'T' + document.getElementById("endtime") + ':00+00:00',
//   },
//   'organizer': {
//     'displayName': document.getElementById("organiser").value,
//     'email': document.getElementById("organiser-mail").value,
//   },
// };
//     if(gapi.auth2.getAuthInstance().isSignedIn.get()){
//       var request = gapi.client.calendar.events.insert({
//         'calendarId': 'iiita.ac.in_64drkdvmmo424joieae2faae7g@group.calendar.google.com',
//         'resource': event
//       });

//       request.execute(function(event) {
//         appendPre('Your event has been created...');
//       });
//     }
//     else{
//       handleAuthClick;
//       var request = gapi.client.calendar.events.insert({
//         'calendarId': 'iiita.ac.in_64drkdvmmo424joieae2faae7g@group.calendar.google.com',
//         'resource': event
//       });

//       request.execute(function(event) {
//         appendPre('Your event has been created...');
//       });
//     }

// }
    </script>
    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
  </body>
</html>
